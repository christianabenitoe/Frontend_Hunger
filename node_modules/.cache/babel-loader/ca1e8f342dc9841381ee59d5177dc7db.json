{"ast":null,"code":"import _asyncToGenerator from\"/Users/musubimanagement/Desktop/hunger-captain-main 2/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/musubimanagement/Desktop/hunger-captain-main 2/frontend/node_modules/@babel/runtime/regenerator/index.js\";import API from'../../API';import{addCartAction,increaseCartAction,decreaseCartAction,fetchCartAction}from'./actions';var api=new API();var CARTS_KEY=\" CARTS_KEY\";export var fetchFromLocalStorage=function fetchFromLocalStorage(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var cartsJSON,carts,subtotal;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:cartsJSON=localStorage.getItem(CARTS_KEY);carts={};if(cartsJSON){carts=JSON.parse(cartsJSON);}subtotal=calculateSubtotal(carts);dispatch(fetchCartAction(carts,subtotal));case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var addCart=function addCart(item){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var prevCarts,subtotal;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:prevCarts=getState().carts.list;prevCarts[item.id]={item:item,selected_count:1};subtotal=calculateSubtotal(prevCarts);setToLocalStorage(prevCarts);dispatch(addCartAction(prevCarts,subtotal));case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();};export var increaseCart=function increaseCart(item){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var prevCarts,nextSelectedCount,subtotal;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:prevCarts=getState().carts.list;nextSelectedCount=prevCarts[item.id].selected_count+1;prevCarts[item.id]={\"item\":item,\"selected_count\":nextSelectedCount};subtotal=calculateSubtotal(prevCarts);setToLocalStorage(prevCarts);dispatch(increaseCartAction(prevCarts,subtotal));case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4,_x5){return _ref3.apply(this,arguments);};}();};export var decreaseCart=function decreaseCart(item){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var prevCarts,nextSelectedCount,subtotal;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:prevCarts=getState().carts.list;nextSelectedCount=prevCarts[item.id].selected_count-1;if(nextSelectedCount>0){prevCarts[item.id]={\"item\":item,\"selected_count\":nextSelectedCount};}else{delete prevCarts[item.id];}subtotal=calculateSubtotal(prevCarts);setToLocalStorage(prevCarts);dispatch(decreaseCartAction(prevCarts,subtotal));case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x6,_x7){return _ref4.apply(this,arguments);};}();};var setToLocalStorage=function setToLocalStorage(carts){localStorage.setItem(CARTS_KEY,JSON.stringify(carts));};var calculateSubtotal=function calculateSubtotal(carts){var subtotal=0;console.log(carts);for(var key in carts){subtotal+=Number(carts[key].item.price)*carts[key].selected_count;}return subtotal;};","map":{"version":3,"sources":["/Users/musubimanagement/Desktop/hunger-captain-main 2/frontend/src/reducks/carts/operations.js"],"names":["API","addCartAction","increaseCartAction","decreaseCartAction","fetchCartAction","api","CARTS_KEY","fetchFromLocalStorage","dispatch","cartsJSON","localStorage","getItem","carts","JSON","parse","subtotal","calculateSubtotal","addCart","item","getState","prevCarts","list","id","selected_count","setToLocalStorage","increaseCart","nextSelectedCount","decreaseCart","setItem","stringify","console","log","key","Number","price"],"mappings":"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","sourcesContent":["import API from '../../API'\nimport {addCartAction, increaseCartAction, decreaseCartAction, fetchCartAction} from './actions'\n\nconst api = new API();\nconst CARTS_KEY = \" CARTS_KEY\";\n\nexport const fetchFromLocalStorage = () => {\n    return async (dispatch) => {\n        let cartsJSON = localStorage.getItem(CARTS_KEY);\n        let carts = {};\n        if (cartsJSON) {\n            carts = JSON.parse(cartsJSON);\n        }\n        const subtotal = calculateSubtotal(carts);\n        dispatch(fetchCartAction(carts, subtotal));\n    }\n}\n\nexport const addCart = (item) => {\n    return async (dispatch, getState) => {\n        let prevCarts = getState().carts.list\n        prevCarts[item.id] = {item: item, selected_count: 1};\n        const subtotal = calculateSubtotal(prevCarts);\n        setToLocalStorage(prevCarts);\n        dispatch(addCartAction(prevCarts, subtotal));\n   }\n}\nexport const increaseCart = (item) => {\n    return async (dispatch, getState) => {\n        let prevCarts = getState().carts.list\n        let nextSelectedCount = prevCarts[item.id].selected_count + 1;\n        prevCarts[item.id] = {\"item\": item, \"selected_count\": nextSelectedCount};\n        const subtotal = calculateSubtotal(prevCarts);\n        setToLocalStorage(prevCarts);\n        dispatch(increaseCartAction(prevCarts, subtotal))\n   }\n}\n\nexport const decreaseCart = (item) => {\n    return async (dispatch, getState) => {\n        let prevCarts = getState().carts.list\n        let nextSelectedCount = prevCarts[item.id].selected_count - 1;\n        if (nextSelectedCount > 0) {\n            prevCarts[item.id] = {\"item\": item, \"selected_count\": nextSelectedCount};\n        } else {\n            delete prevCarts[item.id];\n        }\n        const subtotal = calculateSubtotal(prevCarts);\n        setToLocalStorage(prevCarts);\n        dispatch(decreaseCartAction(prevCarts, subtotal))\n   }\n}\n\nconst setToLocalStorage = (carts) => {\n    localStorage.setItem(CARTS_KEY, JSON.stringify(carts));\n}\n\nconst calculateSubtotal = (carts) => {\n    let subtotal = 0;\n    console.log(carts);\n    for (let key in carts) {\n        subtotal += (Number(carts[key].item.price) * carts[key].selected_count);\n    }\n   return subtotal;\n} "]},"metadata":{},"sourceType":"module"}